{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\moarw\\\\OneDrive\\\\M2L\\\\maison-des-ligues\\\\src\\\\components\\\\Admin\\\\Utilisateurs.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Utilisateurs() {\n  _s();\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost:3000/api/usersroute/utilisateurs\");\n      if (!response.ok) {\n        throw new Error(\"Erreur lors de la récupération des utilisateurs\");\n      }\n      const data = await response.json();\n      setUsers(data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const handleDelete = async uid => {\n    try {\n      const token = Cookies.get('token'); // Récupérez le token JWT depuis le cookie\n\n      const response = await fetch(`http://localhost:3000/api/usersroute/utilisateurs/${uid}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          // Inclure le token JWT dans l'en-tête Authorization\n          'Content-Type': 'application/json' // Spécifier le type de contenu\n        }\n      });\n      if (response.ok) {\n        // Mettez à jour l'état des utilisateurs localement\n        setUsers(users.filter(user => user.uid !== uid));\n      } else {\n        console.error('Erreur lors de la suppression de l\\'utilisateur :', response.statusText);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la suppression de l\\'utilisateur :', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Liste des utilisateurs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: users && users.length > 0 ? users.map(user => !user.admin && /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [user.name, \" - \", user.email, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(user.uid),\n          children: \"Supprimer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 33\n        }, this)]\n      }, user.uid, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"Aucun utilisateur trouv\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(Utilisateurs, \"JadZszbqna06PpJs9hMo7Hl/LOY=\");\n_c = Utilisateurs;\nexport default Utilisateurs;\nvar _c;\n$RefreshReg$(_c, \"Utilisateurs\");","map":{"version":3,"names":["React","useEffect","useState","Cookies","jsxDEV","_jsxDEV","Utilisateurs","_s","users","setUsers","fetchUsers","response","fetch","ok","Error","data","json","error","console","handleDelete","uid","token","get","method","headers","filter","user","statusText","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","admin","name","email","onClick","_c","$RefreshReg$"],"sources":["C:/Users/moarw/OneDrive/M2L/maison-des-ligues/src/components/Admin/Utilisateurs.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Cookies from 'js-cookie';\n\nfunction Utilisateurs() {\n    const [users, setUsers] = useState([]);\n\n    useEffect(() => {\n        fetchUsers();\n    }, []);\n\n    const fetchUsers = async () => {\n        try {\n            const response = await fetch(\"http://localhost:3000/api/usersroute/utilisateurs\");\n            if (!response.ok) {\n                throw new Error(\"Erreur lors de la récupération des utilisateurs\");\n            }\n            const data = await response.json();\n            setUsers(data);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleDelete = async (uid) => {\n        try {\n            const token = Cookies.get('token'); // Récupérez le token JWT depuis le cookie\n\n            const response = await fetch(`http://localhost:3000/api/usersroute/utilisateurs/${uid}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${token}`, // Inclure le token JWT dans l'en-tête Authorization\n                    'Content-Type': 'application/json', // Spécifier le type de contenu\n                },\n            });\n\n            if (response.ok) {\n                // Mettez à jour l'état des utilisateurs localement\n                setUsers(users.filter(user => user.uid !== uid));\n            } else {\n                console.error('Erreur lors de la suppression de l\\'utilisateur :', response.statusText);\n            }\n        } catch (error) {\n            console.error('Erreur lors de la suppression de l\\'utilisateur :', error);\n        }\n    };\n    return (\n        <div>\n            <h1>Liste des utilisateurs</h1>\n            <ul>\n                {users && users.length > 0 ? (\n                    users.map((user) => (\n                        !user.admin && (\n                            <li key={user.uid}>\n                                {user.name} - {user.email}\n                                <button onClick={() => handleDelete(user.uid)}>Supprimer</button>\n                            </li>\n                        )\n                    ))\n                ) : (\n                    <li>Aucun utilisateur trouvé</li>\n                )}\n            </ul>\n        </div>\n    );\n}\n\nexport default Utilisateurs;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}