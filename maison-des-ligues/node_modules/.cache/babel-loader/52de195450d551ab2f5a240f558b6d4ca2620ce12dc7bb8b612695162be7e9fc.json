{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\moarw\\\\OneDrive\\\\M2L\\\\maison-des-ligues\\\\src\\\\components\\\\Admin\\\\ModifyProduct.jsx\",\n  _s2 = $RefreshSig$();\n// ModifyProduct.jsx\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ModifyProduct() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [editProduct, setEditProduct] = useState(null);\n  const modifyProduct = () => {\n    _s();\n    const [editProduct, setEditProduct] = useState(null);\n    useEffect(() => {\n      fetch(\"http://localhost:3000/api/produitsroute/produit\").then(response => response.json()).then(data => setProducts(data)).catch(error => console.error(error));\n    }, []);\n    const handleChange = e => {\n      if (e.target.name === 'image') {\n        setImage(e.target.files[0]);\n      } else if (e.target.name === 'name') {\n        setName(e.target.value);\n      } else if (e.target.name === 'details') {\n        setDetails(e.target.value);\n      } else if (e.target.name === 'price') {\n        setPrice(e.target.value);\n      } else if (e.target.name === 'quantity') {\n        setQuantity(e.target.value);\n      }\n    };\n\n    // Gestionnaire de sélection d'un produit pour la modification\n    const handleEditProduct = product => {\n      setEditProduct(product);\n      setSelectedProduct(product);\n      setName(product.name);\n      setDetails(product.details);\n      setPrice(product.price);\n      setQuantity(product.quantity);\n      // Réinitialiser l'image pour éviter les problèmes de cache dans le formulaire de modification\n      setImage(null);\n    };\n    const handleSubmit = async e => {\n      e.preventDefault();\n      const formDataToSend = new FormData();\n      formDataToSend.append('name', name);\n      formDataToSend.append('details', details);\n      formDataToSend.append('price', price);\n      formDataToSend.append('image', image);\n      formDataToSend.append('quantity', quantity);\n      formDataToSend.append('category', category); // Ajout de la quantité dans les données à envoyer\n\n      try {\n        if (selectedProduct) {\n          const response = await fetch(`http://localhost:3000/api/produitsroute/produit/${selectedProduct.pid}`, {\n            method: 'PUT',\n            // Utilisation de la méthode PUT pour la mise à jour\n            body: formDataToSend\n          });\n          if (response.ok) {\n            // Mise à jour de l'état du produit modifié\n            const updatedProduct = await response.json();\n            const updatedProducts = products.map(product => product.pid === updatedProduct.pid ? updatedProduct : product);\n            setProducts(updatedProducts);\n\n            // Réinitialisation des champs du formulaire\n            setName('');\n            setDetails('');\n            setPrice('');\n            setImage(null);\n            setQuantity('');\n            setCategory('');\n            setSelectedProduct(null);\n            // Réinitialiser l'état du produit en cours de modification\n            setEditProduct(null);\n          } else {\n            console.error('Erreur lors de la mise à jour du produit :', response.statusText);\n            setError('Erreur lors de la mise à jour du produit.');\n          }\n        } else {\n          // Logique d'ajout d'un nouveau produit (inchangée)\n        }\n      } catch (error) {\n        console.error('Erreur lors de la soumission du formulaire :', error);\n        setError('Une erreur s\\'est produite lors de la soumission du formulaire.');\n      }\n    };\n  };\n  _s(modifyProduct, \"WCzxbBdi/VNjYjgSeHzFYG2/2RY=\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: editProduct && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: name,\n        onChange: handleChange,\n        name: \"name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: details,\n        onChange: handleChange,\n        name: \"details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: price,\n        onChange: handleChange,\n        name: \"price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: quantity,\n        onChange: handleChange,\n        name: \"quantity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleChange,\n        name: \"image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: category,\n        onChange: handleChange,\n        name: \"category\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select a category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"clothes\",\n          children: \"Clothes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"ball\",\n          children: \"Ball\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"accessory\",\n          children: \"Accessory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Valider la modification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}\n_s2(ModifyProduct, \"moXfLv724tpmSOtobFGJtgLirF8=\");\n_c = ModifyProduct;\nexport default ModifyProduct;\nvar _c;\n$RefreshReg$(_c, \"ModifyProduct\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","ModifyProduct","_s2","_s","$RefreshSig$","selectedProduct","setSelectedProduct","editProduct","setEditProduct","modifyProduct","useEffect","fetch","then","response","json","data","setProducts","catch","error","console","handleChange","e","target","name","setImage","files","setName","value","setDetails","setPrice","setQuantity","handleEditProduct","product","details","price","quantity","handleSubmit","preventDefault","formDataToSend","FormData","append","image","category","pid","method","body","ok","updatedProduct","updatedProducts","products","map","setCategory","statusText","setError","children","onSubmit","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/moarw/OneDrive/M2L/maison-des-ligues/src/components/Admin/ModifyProduct.jsx"],"sourcesContent":["// ModifyProduct.jsx\r\nimport React, { useState } from 'react';\r\n\r\nfunction ModifyProduct() {\r\n    const [selectedProduct, setSelectedProduct] = useState(null);\r\n    const [editProduct, setEditProduct] = useState(null);\r\n\r\n    const modifyProduct = () => {\r\n        const [editProduct, setEditProduct] = useState(null);\r\n\r\n        useEffect(() => {\r\n            fetch(\"http://localhost:3000/api/produitsroute/produit\")\r\n                .then((response) => response.json())\r\n                .then((data) => setProducts(data))\r\n                .catch((error) => console.error(error));\r\n        }, []);\r\n    \r\n        const handleChange = (e) => {\r\n            if (e.target.name === 'image') {\r\n                setImage(e.target.files[0]);\r\n            } else if (e.target.name === 'name') {\r\n                setName(e.target.value);\r\n            } else if (e.target.name === 'details') {\r\n                setDetails(e.target.value);\r\n            } else if (e.target.name === 'price') {\r\n                setPrice(e.target.value);\r\n            } else if (e.target.name === 'quantity') {\r\n                setQuantity(e.target.value);\r\n            }\r\n        };\r\n    \r\n        // Gestionnaire de sélection d'un produit pour la modification\r\n        const handleEditProduct = (product) => {\r\n            setEditProduct(product);\r\n            setSelectedProduct(product);\r\n            setName(product.name);\r\n            setDetails(product.details);\r\n            setPrice(product.price);\r\n            setQuantity(product.quantity);\r\n            // Réinitialiser l'image pour éviter les problèmes de cache dans le formulaire de modification\r\n            setImage(null);\r\n        };\r\n    \r\n        const handleSubmit = async (e) => {\r\n            e.preventDefault();\r\n    \r\n            const formDataToSend = new FormData();\r\n            formDataToSend.append('name', name);\r\n            formDataToSend.append('details', details);\r\n            formDataToSend.append('price', price);\r\n            formDataToSend.append('image', image);\r\n            formDataToSend.append('quantity', quantity);\r\n            formDataToSend.append('category', category); // Ajout de la quantité dans les données à envoyer\r\n    \r\n            try {\r\n                if (selectedProduct) {\r\n                    const response = await fetch(`http://localhost:3000/api/produitsroute/produit/${selectedProduct.pid}`, {\r\n                        method: 'PUT', // Utilisation de la méthode PUT pour la mise à jour\r\n                        body: formDataToSend,\r\n                    });\r\n    \r\n                    if (response.ok) {\r\n                        // Mise à jour de l'état du produit modifié\r\n                        const updatedProduct = await response.json();\r\n                        const updatedProducts = products.map(product =>\r\n                            product.pid === updatedProduct.pid ? updatedProduct : product\r\n                        );\r\n                        setProducts(updatedProducts);\r\n    \r\n                        // Réinitialisation des champs du formulaire\r\n                        setName('');\r\n                        setDetails('');\r\n                        setPrice('');\r\n                        setImage(null);\r\n                        setQuantity('');\r\n                        setCategory('');\r\n                        setSelectedProduct(null);\r\n                        // Réinitialiser l'état du produit en cours de modification\r\n                        setEditProduct(null);\r\n                    } else {\r\n                        console.error('Erreur lors de la mise à jour du produit :', response.statusText);\r\n                        setError('Erreur lors de la mise à jour du produit.');\r\n                    }\r\n                } else {\r\n                    // Logique d'ajout d'un nouveau produit (inchangée)\r\n                }\r\n            } catch (error) {\r\n                console.error('Erreur lors de la soumission du formulaire :', error);\r\n                setError('Une erreur s\\'est produite lors de la soumission du formulaire.');\r\n            }\r\n        };\r\n    \r\n    };\r\n\r\n    return (\r\n        <div>\r\n             {/* Nouveau formulaire pour modifier un produit */}\r\n             {editProduct && (\r\n                <form onSubmit={handleSubmit}>\r\n                    {/* Vous pouvez concevoir ce formulaire selon vos besoins */}\r\n                    {/* Par exemple, vous pouvez afficher les valeurs actuelles du produit sélectionné pour la modification */}\r\n                    {/* Vous pouvez également ajouter des champs supplémentaires si nécessaire */}\r\n                    <input type=\"text\" value={name} onChange={handleChange} name=\"name\" />\r\n                    <input type=\"text\" value={details} onChange={handleChange} name=\"details\" />\r\n                    <input type=\"number\" value={price} onChange={handleChange} name=\"price\" />\r\n                    <input type=\"number\" value={quantity} onChange={handleChange} name=\"quantity\" />\r\n                    <input type=\"file\" onChange={handleChange} name=\"image\" />\r\n                    <select value={category} onChange={handleChange} name=\"category\">\r\n                     <option value=\"\">Select a category</option>\r\n                     <option value=\"clothes\">Clothes</option>\r\n                     <option value=\"ball\">Ball</option>\r\n                     <option value=\"accessory\">Accessory</option>\r\n                     </select>\r\n                    <button type=\"submit\">Valider la modification</button>\r\n                </form>\r\n            )}\r\n       \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModifyProduct;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}